{% extends "base.html" %}

{% block mtitle %}Drive{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-4">
    <h2 class="page-header">Upload</h2>
    <p class="text-warning">Dit Drive is still testing, files may be deleted!</p>
    <form role="form" action="." method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        {{ form.file }}
      </div>
      <input type="submit" class="btn btn-default">
    </form>
  <p>Usage: {{ usage|filesizeformat }}</p>
  </div>
  <div class="col-md-8">
    <h2 class="page-header">My Files</h2>
    <form method="post">
      {% csrf_token %}
      <table class="table table-hover">
        {% for file in files %}
        <tr>
          <td>{{ file.as_link }}</td>
	  <td class="text-right hidden-xs"><small>{{ file.file.size|filesizeformat }}</small></td>
	  <td class="text-right hidden-xs"><small>{{ file.created_at|date:"Y/m/d H:i:s" }}</small></td>
	  <td class="text-right"><button type="submit" onclick="return confirm('Are you sure you want to delete the following file?\n{{ file.filename }}')" class="close" formaction="{% url 'drive-delete' file.id %}"><span aria-hidden="true">&times;</span></button></td>
        </tr>
        {% empty %}
        <tr><td>You don't have any files.</td></tr>
      </table>
    </form>
  </div>
</div>
{% endfor %}
{% endblock %}
